<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<title>PriceÂ TheoremÂ Alerts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body{font-family:Inter,sans-serif;margin:2rem;background:#f9f9f9}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #ccc;padding:8px 10px;text-align:center}
.metrics span{display:inline-block;font-size:.8em;padding:0 5px}
.filter-buttons button{margin-right:6px;margin-bottom:6px}
@media(max-width:680px){th,td{font-size:.75em}}
</style></head><body>

<h2>ðŸ“ˆ PriceÂ Theorem â€” iGOT Alerts</h2>

<form method="get" style="margin-bottom:1rem">
  <label>ðŸ“… Date:</label>
  <input type="date" name="date" value="{{ selected_date }}">
  <button type="submit">View</button>
</form>

<div class="filter-buttons">
  <button onclick="fTrend('')">All</button>
  <button onclick="fTrend('Bullish')">Bullish</button>
  <button onclick="fTrend('Bearish')">Bearish</button>
  <button onclick="fFlag('Flat PE')">FlatÂ PE</button>
  <button onclick="fFlag('Strong CE')">StrongÂ CE</button>
  <button onclick="fFlag('IV Pump')">IVÂ Pump</button>
  <button onclick="fFlag('IV Crush')">IVÂ Crush</button>
</div>

<table><thead><tr>
  <th>Symbol</th><th>Time</th><th>LTP</th>
  <th>PUT</th><th>CALL</th><th>Metrics</th>
</tr></thead><tbody>
{% for a in alerts %}
<tr>
  <td>{{ a.symbol }}</td>
  <td>{{ a.time }}</td>
  <td>{{ a.ltp }}</td>
  <td>{{ a.put_result }}</td>
  <td>{{ a.call_result }}</td>
  <td class="metrics">
    <span><strong>Î”CE:</strong>{{ a.dce }}</span>
    <span><strong>Î”PE:</strong>{{ a.dpe }}</span>
    <span><strong>Sk:</strong>{{ a.skew }}</span>
    <span><strong>IVÎ”C:</strong>{{ a.ivd_ce }}</span>
    <span><strong>IVÎ”P:</strong>{{ a.ivd_pe }}</span>
    <span><strong>VolÃ—:</strong>{{ a.call_vol }}</span>
    <span><strong>T:</strong>{{ a.trend }}</span>
    <span><strong>F:</strong>{{ a.flag }}</span>
    <span><strong>IV:</strong>{{ a.iv_flag }}</span>
  </td>
</tr>
{% endfor %}
</tbody></table>

<script>
function fTrend(v){document.querySelectorAll("tbody tr").forEach(r=>{
  const t=r.querySelector(".metrics span:nth-last-child(3)").textContent;
  r.style.display=(!v||t.includes(v))?'':'none';
});}
function fFlag(v){document.querySelectorAll("tbody tr").forEach(r=>{
  const fx=r.querySelector(".metrics span:nth-last-child(2)").textContent+
           r.querySelector(".metrics span:last-child").textContent;
  r.style.display=(!v||fx.includes(v))?'':'none';
});}
</script></body></html>
